{% extends "base.html" %}

{% block content %}
  <h1 class="h3 mb-3 text-center">üì∑ ID Tracking AI</h1>
  <p class="text-muted text-center">Upload an ID image to detect its type and dimensions.</p>

  <form id="uploadForm" class="card p-4 shadow-sm mx-auto" style="max-width: 450px;" enctype="multipart/form-data">
    <input class="form-control mb-3" type="file" name="file" accept="image/*" required>
    <button class="btn btn-primary w-100" type="submit">Upload</button>
  </form>

  <pre class="response mt-4 text-success" id="response"></pre>

  <script>
    const form = document.getElementById('uploadForm');
    const responseDiv = document.getElementById('response');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      responseDiv.textContent = '‚è≥ Uploading...';

      const formData = new FormData(form);

      try {
        const res = await fetch('/upload', {
          method: 'POST',
          body: formData
        });

        const data = await res.json();
        responseDiv.textContent = JSON.stringify(data, null, 2);
      } catch (err) {
        responseDiv.textContent = '‚ùå Error: ' + err.message;
      }
    });
  </script>
{% endblock %}
