{% extends "base.html" %}

{% block content %}
<div class="card shadow p-4">
    <h3 class="mb-3">Analysis Results</h3>
    
    <p><strong>Filename:</strong> {{ result.filename }}</p>
    <p><strong>File Type:</strong> {{ result.type }}</p>

    {% if result.dimensions %}
        <p><strong>Dimensions:</strong> {{ result.dimensions }}</p>
    {% endif %}

    {% if result.text %}
        <p><strong>Extracted Text:</strong> {{ result.text }}</p>
    {% endif %}

    {% if result.objects %}
        <p><strong>Detected Objects:</strong> {{ result.objects }}</p>
    {% endif %}

    <!-- Map placeholder -->
    <div id="map" style="height:400px;" class="mt-3"></div>
</div>

<!-- Leaflet.js for map -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>

<script>
    // Initialize Leaflet map
    var map = L.map('map').setView([9.05785, 7.49508], 6); // Default Nigeria view

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: 'Â© OpenStreetMap contributors'
    }).addTo(map);

    // Example marker (replace with backend coords later)
    L.marker([9.05785, 7.49508]).addTo(map)
        .bindPopup("Possible location detected")
        .openPopup();
</script>
{% endblock %}
